<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Insert title here</title>
    <style type="text/css"></style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
      $(function () {
        /*
          1. id, name 폼의 공란을 확인..공백일 때 alert창 알아서 띄우기 (메시지 알아서 작성), 마우스 포커스 맞추기, 페이지 안 넘어가도록
          2. checkbox... 하나 이상의 취미를 선택하도록..하나도 선택 안하면 알아서 메시지 띄우기
          3.             하나 이상의 취미를 선택했다면 $.each()로 선택한 취미를 하나의 alert창 띄움
          4. 서버로 전송 직전에 confirm 창 사용..."3개의 취미를 선택하셨습니다. 전송하시겠습니까?"...확인/취소
        */

        $("#frm").submit((e) => {
          //공란
          let idEpt = false;
          let nameEpt = false;
          idEpt = $("#id").val() == "";
          nameEpt = $("#name").val() == "";

          //둘 중 하나 공란이라면 alert(), 이벤트 막기, id로 포커스 이동
          if (idEpt || nameEpt) {
            alert("id와 name이 입력되지 않았습니다. 다시 확인해 주세요.");
            event.preventDefault();
            $("#id").focus();
          }

          //   //취미 선택 안함
          //   let hobbySel = false;
          //   hobbySel = $(".hobby").is(":selected");

          //   let hobbies = [];

          //   //취미 선택 안했다면 alert(), 했다면 each + alert()
          //   if (hobbySel) {
          //     alert("하나 이상의 취미를 선택해주세요.");
          //   } else {
          //     $.each(hobbies, (index, item) => {
          //       $(".hobby : selected").val().appendTo(hobbies);
          //     });
          //     console.log(hobbies);
          //   }

          var hobbyArr = $("input[name=hobby]:checked");

          var text = "";

          alert(hobbyArr.length);
          if (hobbyArr.length == 0) {
            alert("하나 이상의 취미는 선택해야 합니다.");
          } else {
            $.each(hobbyArr, (index, item) => {
              //item은 폼임 -> 값이 나오게 해야 함
              text += item.value + " ";
              //val()이 안 됨...왜? - $(item).val()로 작성해야 함
            });

            alert(text);
            return confirm(
              "당신은 " +
                text.length +
                "개의 취미를 선택했습니다. 전송하시겠습니까?"
            );
          }
        });
      });
    </script>
  </head>
  <body>
    <form action="06_result.jsp" id="frm">
      id <input type="text" name="id" id="id" value="" /> name
      <input type="text" name="name" id="name" value="" />
      <br />

      <strong>당신의 취미를 고르세요</strong><br />
      <input type="checkbox" name="hobby" value="fishing" />낚시<br />
      <input type="checkbox" name="hobby" value="sleep" />낮잠<br />
      <input type="checkbox" name="hobby" value="origami" />종이접기<br />
      <input type="checkbox" name="hobby" value="climbing" />클라이밍<br />

      <input type="submit" value="SEND" />
    </form>
  </body>
</html>
